(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fe612cac"],{"13d5":function(e,t,r){"use strict";var n=r("23e7"),i=r("d58f").left,o=r("a640"),a=r("2d00"),s=r("605d"),c=!s&&a>79&&a<83,l=c||!o("reduce");n({target:"Array",proto:!0,forced:l},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},a15b:function(e,t,r){"use strict";var n=r("23e7"),i=r("e330"),o=r("44ad"),a=r("fc6a"),s=r("a640"),c=i([].join),l=o!=Object,d=l||!s("join",",");n({target:"Array",proto:!0,forced:d},{join:function(e){return c(a(this),void 0===e?",":e)}})},b5ab:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-input",{attrs:{disabled:"",value:e.$route.query.roleName}}),r("el-tree",{ref:"tree",staticStyle:{margin:"20px 0"},attrs:{data:e.allPermissions,"node-key":"id","show-checkbox":"","default-expand-all":"",props:e.defaultProps}}),r("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.save}},[e._v("保存")]),r("el-button",{on:{click:function(t){return e.$router.replace({name:"Role"})}}},[e._v("取消")])],1)},i=[],o=(r("13d5"),r("d3b7"),r("14d9"),r("a15b"),r("ac1f"),r("5319"),r("caad"),r("2532"),{name:"RoleAuth",data:function(){return{loading:!1,allPermissions:[],defaultProps:{children:"children",label:"name"}}},created:function(){this.init()},methods:{init:function(){var e=this.$route.params.id;this.getPermissions(e)},getPermissions:function(e){var t=this;this.$API.permission.toAssign(e).then((function(e){var r=e.data.children;t.allPermissions=r;var n=t.getCheckedIds(r);t.$refs.tree.setCheckedKeys(n)}))},getCheckedIds:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce((function(e,n){return n.select&&4===n.level?e.push(n.id):n.children&&t.getCheckedIds(n.children,r),e}),r)},save:function(){var e=this,t=this.$refs.tree.getCheckedKeys().join(",");this.loading=!0,this.$API.permission.doAssign(this.$route.params.id,t).then((function(t){e.loading=!1,e.$message.success(t.$message||"分配权限成功");var r=e.$route.query.roleName,n=e.$store.getters.roles;e.$router.replace("/acl/role/list",(function(){console.log("replace onComplete"),n.includes(r)&&window.location.reload()}))}))}}}),a=o,s=r("2877"),c=Object(s["a"])(a,n,i,!1,null,null,null);t["default"]=c.exports},d58f:function(e,t,r){var n=r("59ed"),i=r("7b0b"),o=r("44ad"),a=r("07fa"),s=TypeError,c=function(e){return function(t,r,c,l){n(r);var d=i(t),u=o(d),f=a(d),h=e?f-1:0,p=e?-1:1;if(c<2)while(1){if(h in u){l=u[h],h+=p;break}if(h+=p,e?h<0:f<=h)throw s("Reduce of empty array with no initial value")}for(;e?h>=0:f>h;h+=p)h in u&&(l=r(l,u[h],h,d));return l}};e.exports={left:c(!1),right:c(!0)}}}]);